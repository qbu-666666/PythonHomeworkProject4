{% extends "base.html" %}
{% load static %}

{% block title %}{{ profile_user.username }} 的个人主页{% endblock %}

{% block content %}
<div class="page-card">
    <h2>{{ profile_user.username }} 的个人主页</h2>

    <div style="text-align: center; margin-bottom: 30px; color: #ddd;">
        <p>注册时间：{{ profile_user.date_joined|date:"Y-m-d" }}</p>
    </div>

    <!-- 统计信息 -->
    <div style="display: flex; justify-content: space-around; margin: 30px 0; flex-wrap: wrap;">
        <div style="text-align: center; min-width: 120px; margin: 10px;">
            <h3 style="margin: 0; font-size: 2em; color: #fff;">{{ total_posts }}</h3>
            <p style="margin: 5px 0 0; color: #bbb;">发布的文章</p>
        </div>
        <div style="text-align: center; min-width: 120px; margin: 10px;">
            <h3 style="margin: 0; font-size: 2em; color: #fff;">{{ total_likes }}</h3>
            <p style="margin: 5px 0 0; color: #bbb;">获得的点赞</p>
        </div>
        <div style="text-align: center; min-width: 120px; margin: 10px;">
            <h3 style="margin: 0; font-size: 2em; color: #fff;">{{ total_comments }}</h3>
            <p style="margin: 5px 0 0; color: #bbb;">收到的评论</p>
        </div>
    </div>

    <!-- 用户的文章列表 -->
    <h3 style="border-top: 1px solid rgba(255,255,255,0.2); padding-top: 20px; margin-top: 40px;">
        我的文章
    </h3>

    {% if posts %}
        {% for post in posts %}
        <div style="background: rgba(255,255,255,0.08); margin: 15px 0; padding: 18px; border-radius: 12px; border-left: 4px solid #4a90e2;">
            {% if post.cover_image %}
                <img src="{{ post.cover_image.url }}" alt="{{ post.title }}" style="max-width: 150px; height: auto; float: left; margin-right: 20px; border-radius: 8px;">
            {% endif %}
            <h4 style="margin: 0 0 10px 0;">
                <a href="{% url 'blog:post_detail' post.pk %}" style="color: #fff; text-decoration: none;">
                    {{ post.title }}
                </a>
            </h4>
            <p style="margin: 8px 0; color: #ccc; font-size: 0.95em;">
                发布时间：{{ post.date_added|date:"Y-m-d H:i" }} | 浏览量：{{ post.views }} | 点赞：{{ post.likes.count }} | 评论：{{ post.comments.count }}
            </p>
            <div style="clear: both;"></div>
        </div>
        {% endfor %}
    {% else %}
        <p style="text-align: center; color: #aaa; font-style: italic; margin: 30px 0;">
            还没有发布任何文章～
        </p>
    {% endif %}

    {% if user == profile_user %}
        <div class="form-actions" style="text-align: center; margin-top: 40px;">
            <a href="{% url 'blog:post_new' %}" class="btn-primary">
                发布新文章
            </a>
        </div>
    {% endif %}
</div>
{% endblock %}